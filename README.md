# Media Streaming Service

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–¥ —Å–µ—Ä–≤–∏—Å–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –º—É–ª—å—Ç–∏–º–µ–¥–∏–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º gRPC –∏ SQLite –Ω–∞ Python.

## üì¶ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

- `media.proto` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ gRPC API.  
- `media_pb2.py`, `media_pb2_grpc.py` ‚Äî —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤.  
- `server.py` ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è gRPC-—Å–µ—Ä–≤–µ—Ä–∞.  
- `client.py` ‚Äî –∫–ª–∏–µ–Ω—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CLI –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–µ–Ω—é.  
- `media.db` ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).  
- `storage/` ‚Äî –ø–∞–ø–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.  

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/your-username/media-streaming-service.git
cd media-streaming-service
```
### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
```bash
python -m venv venv
source venv/bin/activate        # Linux/MacOS
venv\Scripts\activate           # Windows PowerShell
```
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install grpcio grpcio-tools
```
SQLite –≤—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É Python.

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è gRPC-–∫–æ–¥–∞
–ü–æ—Å–ª–µ –ø—Ä–∞–≤–æ–∫ media.proto –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
python -m grpc_tools.protoc \
    --proto_path=. \
    --python_out=. \
    --grpc_python_out=. \
    media.proto
```
–ë—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã/–æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã media_pb2.py –∏ media_pb2_grpc.py.

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å –ø–∞–ø–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è:
```bash
mkdir -p storage
```
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
python server.py
```
–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç—å –ø–æ—Ä—Ç 50051 –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –±–∞–∑—É media.db.

### 5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
#### 5.1. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤:
```bash
python client.py
```
–ü–æ—è–≤–∏—Ç—Å—è –º–µ–Ω—é —Å –≤—ã–±–æ—Ä–æ–º:
1. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
2. –°—Ç—Ä–∏–º–∏—Ç—å —Ñ–∞–π–ª
3. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
4. –°–ø–∏—Å–æ–∫ –≤–∏–¥–µ–æ

#### 5.2. CLI-—Ä–µ–∂–∏–º
```bash
# –ó–∞–≥—Ä—É–∑–∫–∞
python client.py upload /path/to/video.mp4

# –°—Ç—Ä–∏–º–∏–Ω–≥ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
python client.py stream <content_id> downloaded.mp4

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
python client.py stats <content_id>

# –°–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
python client.py list
```

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã contents

| –ü–æ–ª–µ          | –¢–∏–ø      | –û–ø–∏—Å–∞–Ω–∏–µ                          |
| ------------- | -------- | --------------------------------- |
| `id`          | INTEGER  | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ |
| `title`       | TEXT     | –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞            |
| `path`        | TEXT     | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –≤ –ø–∞–ø–∫–µ `storage/`   |
| `uploaded_at` | DATETIME | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏             |

